{% extends 'core/base.html' %}
{% load static %}
{% load time_formats %}

{% block content %}
    <form class="flex-row" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <section class="card stacked half-width">
            <h2>Update Context</h2>

            <div class="label-input">
                {{ form.name.label_tag }}
                {{ form.name }}
                {{ form.name.errors }}
            </div>

            <div class="label-input">
                {{ form.description.label_tag }}
                {{ form.description }}
                {{ form.description.errors }}
            </div>

            <div class="button-row">
                <button type="submit" class="primary-button">
                    <i class="fa fa-check-circle"></i>
                    Update Context
                </button>

                <button type="button" class="primary-button dark-red" onclick="window.location.href='{% url 'delete_context' context_obj.id %}'">
                    <i class="fa fa-trash"></i>
                    Delete Context
                </button>
            </div>
            <div class="button-row">
                <button type="button" class="secondary-button" onclick="window.location.href='{% url 'contexts' %}'">
                    <i class="fa fa-arrow-left"></i>
                    Back
                </button>
            </div>
        </section>

        <section class="card stacked half-width space-around">
            <h3>Context Summary</h3>

            <span>
                Total projects:
                <span class="text-cyan">{{ sidebar_total_projects }}</span>
                {{ sidebar_status_counts|project_status_counts_formatter }}
            </span>

            <span>
                Total time:
                <span class="text-green">{{ sidebar_total_time|min_formatter }}</span>
            </span>

            <span>
                Average session length:
                <span class="text-cyan">{{ sidebar_average_session_duration|min_formatter }}</span>
            </span>
        </section>

    </form>
{% endblock %}
